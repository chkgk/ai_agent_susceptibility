{{ block title }}
    Demographics
{{ endblock }}

{{ block styles }}
    <style>
        input[type=range] {
            width: 100%;
            appearance: none;
            background: #ddd;
            height: 6px;
            border-radius: 3px;
            cursor: pointer;
        }

        /* Hide the thumb initially */
        input[type=range]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #007bff;
            cursor: pointer;
            opacity: 0; /* invisible */
        }

        input[type=range].active::-webkit-slider-thumb {
            opacity: 1; /* visible after first click */
        }

        input[type=range]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #007bff;
            border: none;
            cursor: pointer;
            opacity: 0;
        }

        input[type=range].active::-moz-range-thumb {
            opacity: 1;
        }
    </style>
{{ endblock }}

{{ block content }}

    {{ formfield player.age }}
    {{ formfield player.gender }}
    {{ formfield player.race }}
    {{ formfield player.education_level }}
    {{ formfield player.education_major }}

    <div class="form-group required mb-3">
        <label for="id_political_view" class="col-form-label">When referring to different political views, people often talk about “left” and “right”.<br>
            Think about your own political views: Where would you place yourself?</label>
        <div class="grid">
            <div class="row">
                <div class="col-2" style="text-align: right;">
                    far left
                </div>
                <div class="col-8 text-center">
                    <input id="id_political_view" name="political_view" type="range" min="0" max="100" step="1" class="form-range">
                </div>
                <div class="col-2">
                    far right
                </div>
            </div>
        </div>
    </div>

    {{ formfield player.income_level }}
    {{ formfield player.comment }}
    
    {{ next_button }}
{{ endblock }}

{{ block scripts }}
<!--    <script src="{{ static 'last/bootstrap-slider.min.js' }}"></script>-->
    <script>
        $('.otree-btn-next').hide();
        
        const slider = document.getElementById('id_political_view');
        let activated = false;

        slider.addEventListener('mousedown', (e) => {
            if (!activated) {
                const rect = slider.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const percent = clickX / rect.width;
                const newValue = slider.min * 1 + percent * (slider.max - slider.min);
                slider.value = Math.round(newValue);
                slider.classList.add('active');
                activated = true;
                $('.otree-btn-next').show();
            }
        });
    </script>
{{ endblock }}